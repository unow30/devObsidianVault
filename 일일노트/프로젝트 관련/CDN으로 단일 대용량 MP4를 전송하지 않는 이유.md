단일 대용량 MP4 파일을 CDN으로 전송하는 것은 **캐싱 효율성**, **트래픽 비용**, **사용자 경험** 측면에서 심각한 문제를 일으킵니다.  
이와 달리 HLS/DASH와 같은 적응형 스트리밍 프로토콜을 사용하면 대부분의 문제가 해결됩니다.  
아래에서 구체적인 이유를 설명합니다.
## 1. 캐시 효율성 차이

|구분|단일 MP4 파일|HLS 세그먼트(TS)|
|---|---|---|
|**캐싱 단위**|전체 파일 또는 부분 범위(Range)|2~10초 단위 세그먼트|
|**재사용률**|낮음 (사용자마다 다른 구간 요청)|높음 (동일 세그먼트 반복 재사용)|
|**CDN 부하**|원본 서버 자주 호출 → 트래픽 증가|캐시 적중률 90%+ → 부하 감소|

- **MP4의 문제**:  
    사용자가 영상의 다른 구간(예: 10%~20%, 50%~60%)을 요청하면 CDN이 각 범위별로 별도 캐시를 생성합니다.  
    이로 인해 **동일 파일에 대한 캐시가 분산되어 저장 공간이 낭비**되고, 원본 서버 트래픽이 증가합니다.

## 2. 트래픽/비용 문제

1gb, 1시간의 영상을 단일 mp4로 저장한 경우와 hls 형식으로 전송한 경우
- **MP4의 프로그레시브 다운로드**: 
	1gb영상을 다운로드하는데 10분이 걸린다고 가정한다.	
    사용자가 영상을 10%인 6분만 시청하더라도 서버는 **1GB 전체를 전송**해야 합니다.
    예: 10,000명이 10%(6분)만 시청 → **10TB 트래픽 발생** (1GB × 10,000).
- **HLS의 효율성**:
	사용자가 영상의 10%(6분)만 시청해도 시청 범위 만큼의 청크파일을 다운로드 받는다.
	청크파일 일부를 미리 다운로드 받아도 전체 영상을 다운로드 받지 않는다.
    시청한 세그먼트만 전송 → **1TB 트래픽** (0.1GB × 10,000)으로 90% 절약.
    

> 클라우드 서비스(AWS 등)는 전송된 데이터 양에 따라 요금을 부과하므로, MP4 사용 시 **불필요한 비용이 10배 이상 증가**합니다.

## 3. 사용자 경험 저하

- **버퍼링**: MP4는 고정 비트레이트로 전송되므로 네트워크 불안정 시 버퍼링이 빈번합니다.
    
- **화질 전환 불가**: 사용자 환경에 맞춰 화질을 조정할 수 없어 모바일 데이터 소모가 큽니다.
    
- **탐색(seek) 지연**: MP4는 특정 구간으로 이동 시 헤더 재계산이 필요해 지연이 발생합니다.
    

반면 HLS는 **적응형 비트레이트(ABR)**로 네트워크 상태에 따라 화질을 실시간 조정하며, 세그먼트 단위 탐색으로 즉시 재생이 가능합니다.

## 4. CDN 정책적 제약

- **대용량 파일 제한**:  
    많은 CDN 업체는 100MB 이상 파일을 기본적으로 캐싱하지 않거나, 캐시 유지 기간을 단축합니다.  
    예: Cloudflare Enterprise 플랜에서도 512MB 이상 파일은 캐시에서 제외될 수 있습니다.
    
- **캐시 무효화 복잡성**:  
    MP4 파일 일부가 수정되면 전체 캐시를 무효화해야 하지만, HLS는 영향받은 세그먼트만 재생성하면 됩니다.
    

## 결론: **HLS/DASH를 사용해야 하는 이유**

1. **트래픽 절감**: 사용자가 시청하지 않은 데이터 전송을 방지합니다.
    
2. **캐싱 효율성**: 세그먼트 재사용으로 CDN 비용을 최적화합니다.
    
3. **사용자 경험 개선**: 버퍼링 감소, 화질 자동 조정, 빠른 탐색을 지원합니다.
    
4. **확장성**: 대규모 동시 접속에도 CDN으로 유연하게 대응할 수 있습니다.
    

단일 MP4 파일은 개발/관리가 간단하지만, **대규모 서비스에서는 HLS 변환을 필수적으로 고려**해야 합니다.

---