# í´ë¼ìš°ë“œ í”„ë¡ íŠ¸ì˜ cors ì´ìŠˆ ìˆ˜ì •ë°©ë²• ê¸°ë¡
- ê°™ì€ ì˜¤ë¦¬ì§„(s3)ì„ ë°”ë¼ë³´ëŠ” ë°°í¬ë¡œ íŠ¹ì • ì˜ìƒë“¤ì„ ìš”ì²­í•  ê²½ìš° ì¼ë¶€ëŠ” ì¬ìƒë˜ê³  ì¼ë¶€ëŠ” corsì— ë§‰íˆëŠ” ì´ìŠˆê°€ ìˆì—ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë¬¸ë‹µì„ ê¸°ë¡í•˜ì˜€ë‹¤.
- ì ì •ì ìœ¼ë¡œ í´ë¼ìš°ë“œ í”„ë¡ íŠ¸ì˜ ì¼ì‹œì ì¸ ë°°í¬ ì´ìŠˆë¼ê³  ê²°ë¡ ì§€ì—ˆë‹¤. ìºì‹± ë¬´íš¨í™” ì‘ì—… ì´í›„ ì ì‹œ ì‹œê°„ì´ ì§€ë‚˜ì„œ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•´ë³´ë‹ˆ ëª¨ë“  ì˜ìƒì— cors ì´ìŠˆê°€ ì‚¬ë¼ì¡Œë‹¤.

<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" class="logo" width="120"/>
# í´ë¼ìš°ë“œ í”„ë¡ íŠ¸ê°€ í•˜ë‚˜ì˜ ë²„í‚·ì„ ì›ë³¸ìœ¼ë¡œ í•˜ëŠ” ë°°í¬ë¥¼ ê°€ì§€ê³  ìˆë‹¤.

ì´ ë°°í¬ë¡œ ê°ì²´ë¥¼ ìš”ì²­í•˜ë©´ í•˜ë‚˜ì˜ ë²„í‚·ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©° ìºì‹±ì„ í•œë‹¤.

ê·¸ëŸ°ë° íŠ¹ì • ê²½ë¡œë¡œ ìš”ì²­í•˜ë©´ corsì—ëŸ¬ê°€ ëœ¨ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ê°™ì€ ì›ë³¸ì˜ ê°™ì€ ë°°í¬ ê°™ì€ ì •ì±…ì¸ë°ë„ ì´ëŸ° í˜„ìƒì´ ë°œìƒí•œë‹¤

í´ë¼ìš°ë“œí”„ë¡ íŠ¸ì—ì„œ íŠ¹ì • ê²½ë¡œë¡œ ìš”ì²­ ì‹œ CORS ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œëŠ” ì£¼ë¡œ **ìºì‹œ ë™ì‘ ì„¤ì •, í—¤ë” ì „ë‹¬ ì •ì±…, ì˜¤ë¦¬ì§„ CORS êµ¬ì„±ì˜ ë¶ˆì¼ì¹˜**ì—ì„œ ë¹„ë¡¯ë©ë‹ˆë‹¤. ë™ì¼í•œ S3 ë²„í‚·ì„ ì›ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ë”ë¼ë„ ê²½ë¡œë³„ ìºì‹œ ì •ì±…ì´ë‚˜ í—¤ë” ì²˜ë¦¬ ë°©ì‹ì´ ë‹¤ë¥´ë©´ ì´ëŸ¬í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ì£¼ìš” ì›ì¸ê³¼ í•´ê²° ë°©ì•ˆì…ë‹ˆë‹¤:

  

---

  

### 1. **ìºì‹œ ë™ì‘(Cache Behavior)ì—ì„œ OPTIONS ë©”ì„œë“œ í—ˆìš© ì—¬ë¶€ í™•ì¸**

  

- **ë¬¸ì œ**: íŠ¹ì • ê²½ë¡œì— ëŒ€í•œ ìºì‹œ ë™ì‘ ì„¤ì •ì—ì„œ `OPTIONS` ë©”ì„œë“œê°€ í—ˆìš©ë˜ì§€ ì•Šìœ¼ë©´ [CORS í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS#preflight_%EC%9A%94%EC%B2%AD)ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.

- **í•´ê²°**:

- CloudFront ì½˜ì†”ì—ì„œ í•´ë‹¹ ê²½ë¡œì˜ **Cache Behavior**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

- **Allowed HTTP Methods**ì— `GET, HEAD, OPTIONS`ê°€ í¬í•¨ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

- **OPTIONS**ê°€ ëˆ„ë½ëœ ê²½ìš°, ìºì‹œ ë™ì‘ì„ í¸ì§‘í•˜ì—¬ ì¶”ê°€í•©ë‹ˆë‹¤[^1_1][^1_2][^1_7].

  

---

  

### 2. **CORS í—¤ë” ì „ë‹¬ ì •ì±… êµ¬ì„±**

  

- **ë¬¸ì œ**: CloudFrontê°€ `Origin` í—¤ë”ë¥¼ ì˜¤ë¦¬ì§„(S3)ìœ¼ë¡œ ì „ë‹¬í•˜ì§€ ì•Šìœ¼ë©´, S3ê°€ `Access-Control-Allow-Origin` í—¤ë”ë¥¼ ìƒì„±í•˜ì§€ ëª»í•©ë‹ˆë‹¤.

- **í•´ê²°**:

- **ì˜¤ë¦¬ì§„ ìš”ì²­ ì •ì±…(Origin Request Policy)**ì—ì„œ ë‹¤ìŒ í—¤ë”ë¥¼ í¬í•¨í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤:

  

```plaintext

Origin, Access-Control-Request-Headers, Access-Control-Request-Method

```

  

- **ì‘ë‹µ í—¤ë” ì •ì±…(Response Headers Policy)**ì—ì„œ `Access-Control-Allow-Origin: *`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€í•˜ê±°ë‚˜ S3ì˜ CORS ì„¤ì •ê³¼ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤[^1_2][^1_4][^1_7][^1_10].

  

---

  

### 3. **ìºì‹œ í‚¤ì— Origin í—¤ë” í¬í•¨**

  

- **ë¬¸ì œ**: CloudFrontê°€ `Origin` í—¤ë”ë¥¼ ìºì‹œ í‚¤ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´, ë‹¤ë¥¸ ì¶œì²˜(Origin)ì˜ ìš”ì²­ì— ëŒ€í•´ ì˜ëª»ëœ CORS í—¤ë”ê°€ ë°˜í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **í•´ê²°**:

- **ìºì‹œ ì •ì±…(Cache Policy)**ì„ í¸ì§‘í•˜ì—¬ `Origin` í—¤ë”ë¥¼ ìºì‹œ í‚¤ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.

- AWS ê´€ë¦¬í˜• ì •ì±… `CORS-S3Origin` ë˜ëŠ” `CORS-CustomOrigin`ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì»¤ìŠ¤í…€ ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤[^1_7][^1_10].

  

---

  

### 4. **S3 ë²„í‚·ê³¼ CloudFrontì˜ CORS ì„¤ì • ì¼ì¹˜ ì—¬ë¶€**

  

- **ë¬¸ì œ**: S3 ë²„í‚·ì˜ CORS êµ¬ì„±(`&lt;AllowedOrigin&gt;`)ê³¼ CloudFrontì˜ ì‘ë‹µ í—¤ë” ì •ì±…ì´ ì¶©ëŒí•  ê²½ìš° í—¤ë”ê°€ ëˆ„ë½ë©ë‹ˆë‹¤.

- **í•´ê²°**:

- S3 ë²„í‚·ì˜ CORS ì„¤ì •ì„ í™•ì¸í•˜ê³  `Access-Control-Allow-Origin: *` ë˜ëŠ” íŠ¹ì • ë„ë©”ì¸ì„ í—ˆìš©í•©ë‹ˆë‹¤.

- CloudFrontì˜ ì‘ë‹µ í—¤ë” ì •ì±…ì´ S3 ì„¤ì •ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤[^1_2][^1_5][^1_9][^1_10].

  

```xml
<!-- S3 CORS ì˜ˆì‹œ -->
<CORSConfiguration>
  <CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
  </CORSRule>
</CORSConfiguration>

```

  
  

---

  

### 5. **ìºì‹œ ë¬´íš¨í™” ë° ìºì‹œ ê°±ì‹  ë¬¸ì œ**

  

- **ë¬¸ì œ**: íŠ¹ì • ê²½ë¡œì˜ ê°ì²´ë¥¼ ë¬´íš¨í™”(Invalidation)í•œ í›„ S3ì—ì„œ ìƒˆë¡œê³ ì¹¨ë˜ë©´ì„œ CORS í—¤ë”ê°€ ëˆ„ë½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **í•´ê²°**:

- ìºì‹œ ë¬´íš¨í™” í›„ S3 ê°ì²´ì˜ CORS í—¤ë”ê°€ ì •ìƒì ìœ¼ë¡œ ë°˜í™˜ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

- CloudFrontì˜ **Minimum TTL**ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ìºì‹œ ê°±ì‹  ì£¼ê¸°ë¥¼ ë‹¨ì¶•í•©ë‹ˆë‹¤[^1_5][^1_9].

  

---

  

### 6. **Lambda@Edgeë¥¼ í†µí•œ í—¤ë” ê°•ì œ ì„¤ì •**

  

- **ë¬¸ì œ**: S3ì™€ CloudFront ì„¤ì •ì„ ì¡°ì •í•´ë„ í—¤ë”ê°€ ì¼ê´€ë˜ê²Œ ì ìš©ë˜ì§€ ì•ŠëŠ” ê²½ìš°.

- **í•´ê²°**:

- Lambda@Edge í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ `viewer-response` ë‹¨ê³„ì—ì„œ `Access-Control-Allow-Origin` í—¤ë”ë¥¼ ê°•ì œë¡œ ì¶”ê°€í•©ë‹ˆë‹¤[^1_6].

- ì˜ˆì‹œ ì½”ë“œ (Python):

  

```python

def lambda_handler(event, context):

response = event['Records'][^1_0]['cf']['response']

response['headers']['access-control-allow-origin'] = [{'value': '*'}]

return response

```

  
  

---

  

### ìš”ì•½

  

- **ìºì‹œ ë™ì‘**ì—ì„œ `OPTIONS` ë©”ì„œë“œ í—ˆìš©.

- **ì˜¤ë¦¬ì§„ ìš”ì²­ ì •ì±…**ì— `Origin` í—¤ë” í¬í•¨.

- **ì‘ë‹µ í—¤ë” ì •ì±…**ê³¼ S3 CORS ì„¤ì • ì¼ì¹˜ í™•ì¸.

- **ìºì‹œ ì •ì±…**ì—ì„œ `Origin`ì„ ìºì‹œ í‚¤ë¡œ ì‚¬ìš©.

- ë¬¸ì œ ì§€ì† ì‹œ **Lambda@Edge**ë¡œ í—¤ë” ê°•ì œ ì„¤ì •.

  

ì´ ë‹¨ê³„ë“¤ì„ ê²€í† í•˜ë©´ íŠ¹ì • ê²½ë¡œì—ì„œì˜ CORS ì˜¤ë¥˜ë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

<div style="text-align: center">â‚</div>

  

[^1_1]: https://aws.amazon.com/ko/awstv/watch/72b494415bf/

  

[^1_2]: https://leeleelee3264.github.io/post/2023-09-25-cors-two/

  

[^1_3]: https://serverfault.com/questions/619699/setting-access-control-allow-origin-on-cloudfront

  

[^1_4]: https://codinginthetrenches.com/2021/06/26/cross-origin-headers-cors-aws-s3-and-aws-cloudfront/

  

[^1_5]: https://stackoverflow.com/questions/45281858/amazon-s3-cloudfront-cors-issue

  

[^1_6]: https://blog.digitalis.io/how-to-add-cors-to-s3-with-cloudfront-1be59c74abaa

  

[^1_7]: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/header-caching.html

  

[^1_8]: https://www.reddit.com/r/aws/comments/h0z3su/cloudfront_does_not_forward_origin_headers_cors/

  

[^1_9]: https://www.reddit.com/r/aws/comments/xy6m1j/issues_with_cors_and_cloudfront_not_setting_the/

  

[^1_10]: https://stackoverflow.com/questions/12358173/correct-s3-cloudfront-cors-configuration

  

[^1_11]: https://repost.aws/knowledge-center/no-access-control-allow-origin-error

  

[^1_12]: https://velog.io/@leehaeun0/ë¯¸ë””ì–´íŒŒì¼-S3ì—ì„œ-CloudFrontë¡œ-ì´ì‚¬í•˜ê¸°-feat-CORS

  

[^1_13]: https://repost.aws/questions/QU_I2oKsRMTBWmdB6S16Q66Q/why-does-my-cloudfront-distribution-give-access-denied-when-i-have-any-path-or-query-params-in-the-url

  

[^1_14]: https://repost.aws/questions/QU9Hn9Eb7XTZiYxVIBV-HNOQ/cloudfront-distribution-returning-incorrect-cors-headers

  

[^1_15]: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/understanding-response-headers-policies.html

  

[^1_16]: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/DownloadDistS3AndCustomOrigins.html

  

[^1_17]: https://bigboss.dev/2021/11/cloudfront-settings-to-use-s3-cors/

  

[^1_18]: https://akku-dev.tistory.com/231

  

[^1_19]: https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/cors.html

  

[^1_20]: https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/understanding-response-headers-policies.html

  

[^1_21]: https://smartlinkio.tistory.com/80

  

[^1_22]: https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html

  

[^1_23]: https://solitas0817.tistory.com/3

  

[^1_24]: https://stackoverflow.com/questions/63832980/cloudfront-cors-headers-getting-cached-resulting-in-cross-origin-problems

  

[^1_25]: https://highlaw00-dev.tistory.com/71

  

[^1_26]: https://blog.hwahae.co.kr/all/tech/10550

  

[^1_27]: https://stackoverflow.com/questions/76853101/why-do-i-get-a-cors-error-when-using-the-custom-domain-name-for-my-cloudfront-di

  

[^1_28]: https://stackoverflow.com/questions/78730581/getting-cors-error-in-aws-cloudfront-distribution-s3-setup

  

[^1_29]: https://serverfault.com/questions/867016/aws-s3-cloudfront-web-font-cors-error

  

[^1_30]: https://www.reddit.com/r/aws/comments/13ntbbd/cors_problem_between_cloudfront_and_apigateway/

  
  

---

  

# CloudFrontì™€ S3ì˜ CORS ì„¤ì •ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”

  

CloudFrontì™€ S3ì˜ CORS ì„¤ì •ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ë¥¼ ë”°ë¥´ë©´ ë©ë‹ˆë‹¤.

  

---

  

## 1. **S3 ë²„í‚·ì˜ CORS ì„¤ì • í™•ì¸**

  

- S3 ì½˜ì†”ì—ì„œ ë²„í‚· > ê¶Œí•œ > CORS êµ¬ì„±(CORS configuration) ë©”ë‰´ë¡œ ì´ë™í•©ë‹ˆë‹¤.

- CORS ê·œì¹™ì—ì„œ **AllowedOrigin**(í—ˆìš©í•  ë„ë©”ì¸), **AllowedMethod**(í—ˆìš©í•  HTTP ë©”ì„œë“œ), **AllowedHeader**(í—ˆìš©í•  í—¤ë”) ë“±ì´ ì‹¤ì œ ìš”ì²­ì— ë§ê²Œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´, í”„ë¡ íŠ¸ì—”ë“œê°€ ì‚¬ìš©í•˜ëŠ” ë„ë©”ì¸(ì˜ˆ: `https://www.example.com`)ì´ AllowedOriginì— í¬í•¨ë˜ì–´ ìˆì–´ì•¼ í•˜ë©°, í•„ìš”í•œ ë©”ì„œë“œ(GET, POST, OPTIONS ë“±)ì™€ í—¤ë”ë„ ì •í™•íˆ ì§€ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤[^2_1][^2_3][^2_4].

  

---

  

## 2. **CloudFrontì˜ ì˜¤ë¦¬ì§„ ìš”ì²­ ì •ì±… ë° ìºì‹œ ì •ì±… í™•ì¸**

  

- CloudFront ì½˜ì†”ì—ì„œ ë°°í¬(Distribution) > ë™ì‘(Behavior) > í¸ì§‘(Edit)ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.

- **Origin Request Policy**ì—ì„œ `Origin`, `Access-Control-Request-Method`, `Access-Control-Request-Headers` í—¤ë”ê°€ S3ë¡œ ì „ë‹¬ë˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì´ ì—†ìœ¼ë©´ S3ê°€ ì˜¬ë°”ë¥¸ CORS í—¤ë”ë¥¼ ë°˜í™˜í•˜ì§€ ëª»í•©ë‹ˆë‹¤[^2_1][^2_2].

- **Cache Policy**ì—ì„œ `Origin` í—¤ë”ê°€ ìºì‹œ í‚¤ì— í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì•¼ ì„œë¡œ ë‹¤ë¥¸ Origin ìš”ì²­ì— ëŒ€í•´ ê°ê° ì˜¬ë°”ë¥¸ CORS ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤[^2_1].

  

---

  

## 3. **ì‹¤ì œ ìš”ì²­ì„ í†µí•œ CORS ë™ì‘ í™•ì¸**

  

- cURLì´ë‚˜ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ë¥¼ ì´ìš©í•´ ì‹¤ì œë¡œ CloudFrontë¥¼ í†µí•´ ê°ì²´ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.

- ì‘ë‹µ í—¤ë”ì— `Access-Control-Allow-Origin` ë“± CORS ê´€ë ¨ í—¤ë”ê°€ ì˜¬ë°”ë¥´ê²Œ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

- S3ì— ì§ì ‘ ìš”ì²­í–ˆì„ ë•Œì™€ CloudFrontë¥¼ í†µí•´ ìš”ì²­í–ˆì„ ë•Œ CORS ì‘ë‹µ í—¤ë”ê°€ ë™ì¼í•˜ê²Œ ë°˜í™˜ë˜ëŠ”ì§€ ë¹„êµí•©ë‹ˆë‹¤[^2_3][^2_4].

  

---

  

## 4. **ì„¤ì • ì¼ì¹˜ ì—¬ë¶€ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸**

  

| ì ê²€ í•­ëª©                      | S3 ì„¤ì • | CloudFront ì„¤ì •                     |
| :------------------------- | :---- | :-------------------------------- |
| AllowedOrigin(í—ˆìš© ë„ë©”ì¸)      | O     | Origin í—¤ë” ì „ë‹¬                      |
| AllowedMethod(í—ˆìš© HTTP ë©”ì„œë“œ) | O     | OPTIONS ë©”ì„œë“œ í—ˆìš©                    |
| AllowedHeader(í—ˆìš© í—¤ë”)       | O     | Access-Control-Request-Headers ì „ë‹¬ |
| ìºì‹œ ì •ì±…ì— Origin í¬í•¨           | -     | Origin í—¤ë” ìºì‹œ í‚¤ í¬í•¨                 |
| ì‘ë‹µ í—¤ë”ì— CORS ê´€ë ¨ ì •ë³´ í¬í•¨       | O     | í•„ìš”ì‹œ ì‘ë‹µ í—¤ë” ì •ì±… ì¶”ê°€                   |

  
  

---

  

## 5. **ë³€ê²½ í›„ ìºì‹œ ë¬´íš¨í™”**

  

- S3 ë˜ëŠ” CloudFrontì˜ CORS ê´€ë ¨ ì„¤ì •ì„ ë³€ê²½í•œ ê²½ìš°, CloudFront ìºì‹œë¥¼ ë¬´íš¨í™”(Invalidation)í•´ì•¼ ë³€ê²½ ì‚¬í•­ì´ ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤[^2_2][^2_3].

  

---

  

### ì°¸ê³ 

  

- S3ì˜ CORS ì„¤ì •ì€ JSON ë˜ëŠ” XMLë¡œ ì‘ì„±í•˜ë©°, CloudFrontì˜ ì˜¤ë¦¬ì§„ ìš”ì²­ ì •ì±…ê³¼ ìºì‹œ ì •ì±…ì´ S3ì˜ ì„¤ì •ê³¼ í˜¸í™˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

- S3ì™€ CloudFront ê°„ì˜ CORS ë¬¸ì œëŠ” ëŒ€ë¶€ë¶„ í—¤ë” ì „ë‹¬, ìºì‹œ ì •ì±…, ìºì‹œ ë¬´íš¨í™” ëˆ„ë½ì—ì„œ ë°œìƒí•©ë‹ˆë‹¤.

  

---

  

ì´ ê³¼ì •ì„ ê±°ì¹˜ë©´ S3ì™€ CloudFrontì˜ CORS ì„¤ì •ì´ ì¼ì¹˜í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì‹¤ì œë¡œ CORSê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

<div style="text-align: center">â‚</div>

  

[^2_1]: https://stackoverflow.com/questions/12358173/correct-s3-cloudfront-cors-configuration

  

[^2_2]: https://repost.aws/ko/questions/QUKG087BYYSKatKS3Amu7KDw/static-js-files-served-from-s3-via-cloudfront-lead-to-intermittent-cors-issues

  

[^2_3]: https://akku-dev.tistory.com/231

  

[^2_4]: https://repost.aws/knowledge-center/s3-configure-cors

  

[^2_5]: https://blog.digitalis.io/how-to-add-cors-to-s3-with-cloudfront-1be59c74abaa

  

[^2_6]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/cors.html

  

[^2_7]: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorS3Origin.html

  

[^2_8]: https://serverfault.com/questions/619699/setting-access-control-allow-origin-on-cloudfront

  

[^2_9]: https://repost.aws/ko/questions/QU45uieYPXRvmkLljzhdY-Ng/sudden-regional-cors-issues-for-an-s3-bucket-accessed-via-cloudfront?sc_ichannel=ha\&sc_ilang=en\&sc_isite=repost\&sc_iplace=hp\&sc_icontent=QU45uieYPXRvmkLljzhdY-Ng\&sc_ipos=4

  

[^2_10]: https://stackoverflow.com/questions/58540243/aws-s3-cloudfront-fonts-not-loading-cors-problem

  

[^2_11]: https://www.youtube.com/watch?v=MrLVvrHlrnA

  

[^2_12]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/ManageCorsUsing.html

  

[^2_13]: https://repost.aws/ko/selections/KPWL9vPN8CSpy95mhDPuxwkg/configure-cors-in-amazon-s3

  

[^2_14]: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html

  

[^2_15]: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/troubleshooting-distributions.html

  

[^2_16]: https://serverfault.com/questions/780414/s3-cloudfront-cors-working-on-some-files-only

  

[^2_17]: https://aws.plainenglish.io/understanding-s3-cors-enabling-cross-origin-resource-sharing-for-amazon-s3-buckets-ea3be8c2604b

  

[^2_18]: https://stackoverflow.com/questions/73764633/cors-strict-origin-using-s3-bucket-and-cloudfront

  

[^2_19]: https://repost.aws/questions/QU45uieYPXRvmkLljzhdY-Ng/sudden-regional-cors-issues-for-an-s3-bucket-accessed-via-cloudfront

  

[^2_20]: https://stackoverflow.com/questions/24719327/cors-configuration-issue-with-cloudfront-s3-and-apache

  
  

---

  

## ì‹¤ì œ ìš”ì²­ì„ í†µí•œ CORS ë™ì‘ í™•ì¸ ë°©ë²•

  

CloudFrontì™€ S3ì˜ CORS ë™ì‘ì´ ì‹¤ì œë¡œ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

---

  

**1. cURL ëª…ë ¹ì–´ë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸**

  

- cURLì„ ì´ìš©í•´ ì‹¤ì œ ë¸Œë¼ìš°ì €ì—ì„œ ë°œìƒí•˜ëŠ” CORS ìš”ì²­ê³¼ ë™ì¼í•œ ì¡°ê±´ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´, CloudFrontë¥¼ í†µí•´ S3 ê°ì²´ë¥¼ ìš”ì²­í•  ë•Œ ì•„ë˜ì™€ ê°™ì´ `Origin` í—¤ë”ë¥¼ í¬í•¨í•˜ì—¬ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

  

```bash

curl -i https://your-cloudfront-domain/path/to/object \

-H "Origin: https://your-frontend-domain.com"

```

  

- ì‘ë‹µ í—¤ë”ì— `Access-Control-Allow-Origin`ì´ ìš”ì²­í•œ Origin(í˜¹ì€ `*`)ìœ¼ë¡œ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ CORSê°€ ì •ìƒì ìœ¼ë¡œ ì ìš©ëœ ê²ƒì…ë‹ˆë‹¤[^3_5][^3_9][^3_15].

  

---

  

**2. Preflight(OPTIONS) ìš”ì²­ í…ŒìŠ¤íŠ¸**

  

- CORS preflight ìš”ì²­ì„ í™•ì¸í•˜ë ¤ë©´ `OPTIONS` ë©”ì„œë“œì™€ ê´€ë ¨ í—¤ë”ë¥¼ í¬í•¨í•´ ì•„ë˜ì™€ ê°™ì´ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

  

```bash

curl -i -X OPTIONS https://your-cloudfront-domain/path/to/object \

-H "Origin: https://your-frontend-domain.com" \

-H "Access-Control-Request-Method: GET" \

-H "Access-Control-Request-Headers: Content-Type"

```

  

- ì‘ë‹µì— `Access-Control-Allow-Origin`, `Access-Control-Allow-Methods`, `Access-Control-Allow-Headers` ë“± CORS ê´€ë ¨ í—¤ë”ê°€ ì˜¬ë°”ë¥´ê²Œ í¬í•¨ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤[^3_6][^3_9][^3_12].

  

---

  

**3. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ í™œìš©**

  

- ì‹¤ì œ ì›¹ í˜ì´ì§€ì—ì„œ CloudFrontë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•œ ë’¤, ë¸Œë¼ìš°ì €ì˜ ê°œë°œì ë„êµ¬(Network íƒ­)ì—ì„œ ìš”ì²­ ë° ì‘ë‹µ í—¤ë”ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

- ìš”ì²­ì— `Origin` í—¤ë”ê°€ í¬í•¨ë˜ì–´ ìˆê³ , ì‘ë‹µì— `Access-Control-Allow-Origin` ë“± CORS í—¤ë”ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤[^3_7][^3_17].

  

---

  

**4. ê²°ê³¼ í•´ì„**

  

- ì‘ë‹µì— CORS ê´€ë ¨ í—¤ë”ê°€ ì—†ë‹¤ë©´, S3 CORS ì •ì±…ì´ë‚˜ CloudFrontì˜ í—¤ë” ì „ë‹¬/ìºì‹œ ì •ì±…ì„ ì ê²€í•´ì•¼ í•©ë‹ˆë‹¤.

- 200 OKì™€ í•¨ê»˜ CORS í—¤ë”ê°€ ì˜¬ë°”ë¥´ê²Œ ë°˜í™˜ëœë‹¤ë©´ CORS ì„¤ì •ì´ ì •ìƒì…ë‹ˆë‹¤[^3_9][^3_15].

  

---

  

ì´ëŸ¬í•œ ì ˆì°¨ë¥¼ í†µí•´ CloudFrontì™€ S3ì˜ CORS ì„¤ì •ì´ ì‹¤ì œ ìš”ì²­ì— ëŒ€í•´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ëª…í™•í•˜ê²Œ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

<div style="text-align: center">â‚</div>

  

[^3_1]: https://akku-dev.tistory.com/231

  

[^3_2]: https://leeleelee3264.github.io/post/2023-09-25-cors-two/

  

[^3_3]: https://velog.io/@qldudgh/CloudFrontì—-ì˜¬ë¦°-Font-CORS-ì—ëŸ¬-í•´ê²°í•˜ëŠ”-ë²•

  

[^3_4]: https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html

  

[^3_5]: https://bigboss.dev/2021/11/cloudfront-settings-to-use-s3-cors/

  

[^3_6]: http://www.popit.kr/curl-ëª…ë ¹ì–´ë¡œ-í•˜ëŠ”-ì´ˆê°„ë‹¨-cors-í…ŒìŠ¤íŠ¸/

  

[^3_7]: https://cacti.co.kr/66

  

[^3_8]: https://skorea6.tistory.com/entry/Cloudfront-CORS-preflight-ì—ëŸ¬-í•´ê²°ë°©ë²•-API

  

[^3_9]: https://repost.aws/ko/knowledge-center/s3-configure-cors

  

[^3_10]: https://neos518.tistory.com/181

  

[^3_11]: https://repost.aws/ko/knowledge-center/no-access-control-allow-origin-error

  

[^3_12]: https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/testing-cors.html

  

[^3_13]: https://velog.io/@leehyunho2001/CORS

  

[^3_14]: https://docs.aws.amazon.com/ko_kr/AmazonCloudFront/latest/DeveloperGuide/example_cloudfront_functions_add_cors_header_section.html

  

[^3_15]: https://smartlinkio.tistory.com/80

  

[^3_16]: https://inpa.tistory.com/entry/WEB-ğŸ“š-CORS-ğŸ’¯-ì •ë¦¬-í•´ê²°-ë°©ë²•-ğŸ‘

  

[^3_17]: https://velog.io/@wwlee94/CloudFront-ì´ë¯¸ì§€-CORS-ì´ìŠˆ

  

[^3_18]: https://inpa.tistory.com/entry/LINUX-ğŸ“š-CURL-ëª…ë ¹ì–´-ì‚¬ìš©ë²•-ë‹¤ì–‘í•œ-ì˜ˆì œë¡œ-ì •ë¦¬

  

[^3_19]: https://velog.io/@hye_rin/Web-%EC%96%B4%EC%A9%8C%EB%8B%A4-%EB%A7%88%EC%A3%BC%EC%B9%9C-CORS%EC%97%90%EB%9F%AC

  

[^3_20]: https://dev.classmethod.jp/articles/resolve-cors-error/

  
  

---

  

# 1. S3 ë²„í‚·ì˜ CORS ì„¤ì • í™•ì¸

  

[

{

"AllowedHeaders": [

"*"

],

"AllowedMethods": [

"GET",

"HEAD"

],

"AllowedOrigins": [

"*"

],

"ExposeHeaders": []

}

]

  

2. CloudFrontì˜ ì˜¤ë¦¬ì§„ ìš”ì²­ ì •ì±… ë° ìºì‹œ ì •ì±… í™•ì¸

/*.m3u8 íŒŒì¼

ìºì‹œì •ì±…

CachingDisabled

Policy with caching disabled

  

ì›ë³¸ ìš”ì²­ ì •ì±… - ì„ íƒì‚¬í•­

ì—†ìŒ

  

ì‘ë‹µí—¤ë” ì •ì±…

CORS-with-preflight-and-SecurityHeadersPolicy

Allows all origins for CORS requests, including preflight requests, and adds security headers

  

/*.tsíŒŒì¼

ìºì‹œì •ì±…

Elemental-MediaPackage

Policy for Elemental MediaPackage Origin

  

ì›ë³¸ ìš”ì²­ ì •ì±…Â - ì„ íƒ ì‚¬í•­

ì—†ìŒ

  

3. ì‹¤ì œ ìš”ì²­ì„ í†µí•œ CORS ë™ì‘ í™•ì¸

3.1. cURL ëª…ë ¹ì–´ë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸

curl -i https://your-cloudfront-domain/path/to/object \

-H "Origin: https://your-frontend-domain.com"

  

3.2. Preflight(OPTIONS) ìš”ì²­ í…ŒìŠ¤íŠ¸

curl -i -X OPTIONS https://your-cloudfront-domain/path/to/object \

-H "Origin: https://your-frontend-domain.com" \

-H "Access-Control-Request-Method: GET" \

-H "Access-Control-Request-Headers: Content-Type"

  

ì‹¤í–‰ë˜ëŠ” m3u8 url

curl -i https://d16ufd393m7gss.cloudfront.net/public/movie/145cb700-9539-42fe-9709-2a43721b112f/origin.m3u8 \

-H "Origin: http://localhost:3010/movies/59â€

dquote> "

HTTP/2 200

content-type: application/vnd.apple.mpegurl

content-length: 440

date: Fri, 25 Apr 2025 04:56:33 GMT

  

access-control-allow-origin: * <<<â€” ì œëŒ€ë¡œ ì„¤ì •ë˜ì—ˆë‹¤.

  

access-control-allow-methods: GET, HEAD

vary: Origin, Access-Control-Request-Headers, Access-Control-Request-Method

last-modified: Thu, 24 Apr 2025 03:22:45 GMT

etag: "8e4a96f742e6567dcddec9c0194e0195"

x-amz-server-side-encryption: AES256

x-amz-meta-mediaconvert-jobid: 1745329938203-f3q5hr

accept-ranges: bytes

server: AmazonS3

x-cache: Miss from cloudfront

via: 1.1 438f5a6be012f7da0df07829647d2a82.cloudfront.net (CloudFront)

x-amz-cf-pop: ICN80-P3

x-amz-cf-id: zKporklEcS3o-1dnH4kVdZY8kuUrBCdfRN8nhIScWzLJs4f-0u2f7g==

x-xss-protection: 1; mode=block

x-frame-options: SAMEORIGIN

referrer-policy: strict-origin-when-cross-origin

x-content-type-options: nosniff

strict-transport-security: max-age=31536000

  

\#EXTM3U

\#EXT-X-VERSION:4

\#EXT-X-INDEPENDENT-SEGMENTS

\#EXT-X-STREAM-INF:BANDWIDTH=4028498,AVERAGE-BANDWIDTH=3700083,CODECS="avc1.4d401f,mp4a.40.5",RESOLUTION=1280x720,FRAME-RATE=29.970

wm16_9.m3u8

\#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=776123,AVERAGE-BANDWIDTH=578543,CODECS="avc1.4d401f",RESOLUTION=1280x720,URI="wm16_9_I-Frame.m3u8"

\#EXT-X-IMAGE-STREAM-INF:BANDWIDTH=34042,CODECS="jpeg",RESOLUTION=312x176,URI="wm16_9_Thumbnail_I-Frame.m3u8"

  

ì‹¤í–‰ì•ˆë˜ëŠ” m3u8 url

curl -i https://d16ufd393m7gss.cloudfront.net/public/movie/b296e729-d72a-47cc-b6cc-ded1f63c8e8f/origin.m3u8

\

-H "Origin: http://localhost:3010/movies/70â€

  

HTTP/2 200

content-type: application/vnd.apple.mpegurl

content-length: 467

date: Fri, 25 Apr 2025 04:57:16 GMT

last-modified: Fri, 25 Apr 2025 04:27:15 GMT

etag: "23760ba39cd586ff660f834ac7e2a60b"

x-amz-server-side-encryption: AES256

x-amz-meta-mediaconvert-jobid: 1745555225235-oyt4rq

accept-ranges: bytes

server: AmazonS3

x-cache: Miss from cloudfront

via: 1.1 9d6766a94eab4dd5061ac7688d0632d8.cloudfront.net (CloudFront)

x-amz-cf-pop: ICN80-P3

x-amz-cf-id: VQF64z30UQ04PPvxI13xBbfijJqPsqVipVxM0hBXxxDN5wkMPIYIXQ==

x-xss-protection: 1; mode=block

x-frame-options: SAMEORIGIN

referrer-policy: strict-origin-when-cross-origin

x-content-type-options: nosniff

strict-transport-security: max-age=31536000

vary: Origin

  

\#EXTM3U

\#EXT-X-VERSION:4

\#EXT-X-INDEPENDENT-SEGMENTS

\#EXT-X-STREAM-INF:BANDWIDTH=3886895,AVERAGE-BANDWIDTH=3886895,CODECS="avc1.4d4028,mp4a.40.5",RESOLUTION=1080x1920,FRAME-RATE=29.970

origin_segment.m3u8

\#EXT-X-I-FRAME-STREAM-INF:BANDWIDTH=689842,AVERAGE-BANDWIDTH=689842,CODECS="avc1.4d4028",RESOLUTION=1080x1920,URI="origin_segment_I-Frame.m3u8"

\#EXT-X-IMAGE-STREAM-INF:BANDWIDTH=115430,CODECS="jpeg",RESOLUTION=312x554,URI="origin_segment_Thumbnail_I-Frame.m3u8"

zsh: command not found: -H

  

cURL ëª…ë ¹ì–´ë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸ë¡œ ì‹¤í–‰ë˜ëŠ” urlê³¼ ì•ˆë˜ëŠ” urlì„ í™•ì¸í•˜ì˜€ë‹¤. Access-Control-Allow-OriginëŠ” ì‹¤í–‰ë˜ëŠ” urlì—ë§Œ ìˆì—ˆë‹¤.

í•˜ì§€ë§Œ ì§€ê¸ˆì€ ëª¨ë“  ì˜ìƒì´ corsì—ëŸ¬ ì—†ì´ í™”ë©´ì— ë‚˜íƒ€ë‚˜ê³ ìˆë‹¤. ë¬´íš¨í™”ì •ì±…ì´ ëŠ¦ê²Œ ë°˜ì˜ëœ ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ”ë° ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  Access-Control-Allow-Originì´ ì—†ëŠ” urlë„ ì˜ìƒì´ ì‹¤í–‰ë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ

  

CloudFrontë¥¼ í†µí•´ íŠ¹ì • `.m3u8` URLì´ CORS í—¤ë”(`Access-Control-Allow-Origin: *`)ë¥¼ ë°˜í™˜í•˜ë©´ì„œ ì •ìƒ ë™ì‘í•˜ê³ , ë‹¤ë¥¸ URLì€ í•´ë‹¹ í—¤ë”ê°€ ëˆ„ë½ë˜ì—ˆìŒì—ë„ ì˜ìƒì´ ì¬ìƒë˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì›ì¸ì—ì„œ ë¹„ë¡¯ë©ë‹ˆë‹¤.

  

---

  

### 1. **ë¸Œë¼ìš°ì €ì˜ CORS ì •ì±… ì ìš© ë²”ìœ„ ì°¨ì´**

  

- **`<video>` íƒœê·¸ì˜ ê¸°ë³¸ ë™ì‘**:

ë¹„ë””ì˜¤ íƒœê·¸(`<video>`)ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ `crossorigin` ì†ì„±ì´ ëª…ì‹œë˜ì§€ ì•Šìœ¼ë©´ ë¸Œë¼ìš°ì €ëŠ” **CORS ê²€ì‚¬ë¥¼ ìƒëµ**í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì„œë²„ì—ì„œ `Access-Control-Allow-Origin` í—¤ë”ê°€ ì—†ì–´ë„ ì˜ìƒì´ ì¬ìƒë©ë‹ˆë‹¤.

- ë‹¨, JavaScriptì—ì„œ ë¹„ë””ì˜¤ ë©”íƒ€ë°ì´í„°(ì˜ˆ: `duration`, `resolution`)ì— ì ‘ê·¼í•˜ë ¤ë©´ CORS í—¤ë”ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤.

- **í…ŒìŠ¤íŠ¸ ë°©ë²• ì°¨ì´**:

`cURL`ë¡œ ìš”ì²­í•  ë•ŒëŠ” **í•­ìƒ CORS í—¤ë” ìœ ë¬´ë¥¼ í™•ì¸**í•˜ì§€ë§Œ, ë¸Œë¼ìš°ì €ì—ì„œ `&lt;video&gt;` íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ í—¤ë” ì—†ì´ë„ ì¬ìƒë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

---

  

### 2. **ìºì‹œ ë¬´íš¨í™” ì§€ì—°**

  

- **ë¬¸ì œ**:

CloudFront ìºì‹œ ë¬´íš¨í™”(Invalidation)ê°€ ì™„ë£Œë˜ê¸° ì „ì— í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë©´, ì´ì „ ìºì‹œëœ ì‘ë‹µ(í—¤ë” ëˆ„ë½)ì´ ë°˜í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´, S3 ë²„í‚·ì˜ CORS ì„¤ì •ì„ ìˆ˜ì •í•œ í›„ ë¬´íš¨í™”í•˜ì§€ ì•Šìœ¼ë©´ ì¼ë¶€ ì—£ì§€ ë¡œì¼€ì´ì…˜ì—ì„œ êµ¬ ìºì‹œë¥¼ ê³„ì† ì‚¬ìš©í•©ë‹ˆë‹¤.

- **í•´ê²°**:

ìºì‹œ ë¬´íš¨í™” í›„ **ìµœì†Œ 5~10ë¶„** ëŒ€ê¸°í•´ì•¼ ë³€ê²½ ì‚¬í•­ì´ ì „íŒŒë©ë‹ˆë‹¤.

  

```bash

# ìºì‹œ ë¬´íš¨í™” í™•ì¸ ëª…ë ¹ì–´

curl -I https://d16ufd393m7gss.cloudfront.net/public/movie/b296e729-d72a-47cc-b6cc-ded1f63c8e8f/origin.m3u8 -H "Origin: http://localhost:3010"

```

  
  

---

  

### 3. **CloudFront ê²½ë¡œë³„ ìºì‹œ ì •ì±… ë¶ˆì¼ì¹˜**

  

- **`.m3u8` vs. `.ts` íŒŒì¼ ì„¤ì • ì°¨ì´**:

- **`.m3u8`**: `CORS-with-preflight-and-SecurityHeadersPolicy`ë¡œ CORS í—¤ë”ê°€ ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤.

- **`.ts`**: `Elemental-MediaPackage` ìºì‹œ ì •ì±…ì„ ì‚¬ìš©í•˜ë©°, ì´ ì •ì±…ì´ CORS í—¤ë”ë¥¼ ì „ë‹¬í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **ì˜í–¥**:

ë§¤ë‹ˆí˜ìŠ¤íŠ¸(`.m3u8`)ëŠ” CORS í—¤ë”ë¥¼ í¬í•¨í•˜ì§€ë§Œ, ì„¸ê·¸ë¨¼íŠ¸(`.ts`)ëŠ” ëˆ„ë½ë  ê²½ìš° **ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì˜¤ë¥˜**ê°€ ë°œìƒí•©ë‹ˆë‹¤(ì˜ˆ: Chromeì€ ì„¸ê·¸ë¨¼íŠ¸ë„ CORS ê²€ì‚¬).

  

---

  

### 4. **S3 CORS ì„¤ì •ì˜ ì™€ì¼ë“œì¹´ë“œ(`*`) ì‚¬ìš©**

  

- **í˜„ì¬ S3 CORS ì„¤ì •**:

  

```json

[

{

"AllowedHeaders": ["*"],

"AllowedMethods": ["GET", "HEAD"],

"AllowedOrigins": ["*"],

"ExposeHeaders": []

}

]

```

  

- `AllowedOrigins: *`ë¡œ ëª¨ë“  ë„ë©”ì¸ì„ í—ˆìš©í•˜ì§€ë§Œ, `ExposeHeaders`ê°€ ë¹„ì–´ ìˆì–´ **í—¤ë” ë…¸ì¶œì´ ì œí•œ**ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **ê¶Œì¥ ì¡°ì¹˜**:

  

```json

"ExposeHeaders": ["Content-Length", "Date", "ETag"]

```

  

ë¥¼ ì¶”ê°€í•˜ì—¬ í•„ìš”í•œ í—¤ë”ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.

  

---

  

### 5. **CloudFront ì‘ë‹µ í—¤ë” ì •ì±…ì˜ ì¼ê´€ì„± ë¶€ì¡±**

  

- **`.m3u8` ê²½ë¡œ**:

`CORS-with-preflight-and-SecurityHeadersPolicy`ê°€ ì ìš©ë˜ì–´ `Access-Control-Allow-Origin: *`ë¥¼ ê°•ì œë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.

- **`.ts` ê²½ë¡œ**:

ë³„ë„ì˜ ì‘ë‹µ í—¤ë” ì •ì±…ì´ ì ìš©ë˜ì§€ ì•Šì•„ S3ì˜ CORS ì„¤ì •ì—ë§Œ ì˜ì¡´í•©ë‹ˆë‹¤.

- S3ì—ì„œ `Access-Control-Allow-Origin: *`ë¥¼ ë°˜í™˜í•˜ë”ë¼ë„ CloudFrontê°€ ì´ë¥¼ ìºì‹œí•˜ì§€ ì•Šìœ¼ë©´ ì¼ê´€ì„±ì´ ê¹¨ì§‘ë‹ˆë‹¤.

  

---

  

### ì¢…í•© ì†”ë£¨ì…˜

  

1. **ëª¨ë“  ë¯¸ë””ì–´ ê²½ë¡œì— ë™ì¼í•œ ìºì‹œ/ì‘ë‹µ í—¤ë” ì •ì±… ì ìš©**:

`.m3u8`ê³¼ `.ts` íŒŒì¼ì´ ë™ì¼í•œ CORS ì •ì±…ì„ ì‚¬ìš©í•˜ë„ë¡ CloudFront ì„¤ì •ì„ í†µì¼í•©ë‹ˆë‹¤.

2. **ìºì‹œ ì •ì±… ì—…ë°ì´íŠ¸**:

`Elemental-MediaPackage` ëŒ€ì‹  `CORS-S3Origin` ì •ì±…ì„ ì‚¬ìš©í•˜ì—¬ `Origin` í—¤ë”ë¥¼ ìºì‹œ í‚¤ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.

3. **ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ë°©ë²• ê°œì„ **:

`<video>` íƒœê·¸ì— `crossorigin="anonymous"`ë¥¼ ì¶”ê°€í•˜ì—¬ CORS ê²€ì‚¬ë¥¼ ê°•ì œí•©ë‹ˆë‹¤.

  

```html

&lt;video controls crossorigin="anonymous"&gt;

&lt;source src="https://d16ufd393m7gss.cloudfront.net/..." type="application/vnd.apple.mpegurl"&gt;

&lt;/video&gt;

```

  
  

---

  

ì´ ì¡°ì¹˜ë“¤ì„ í†µí•´ CORS í—¤ë”ì˜ ì¼ê´€ì„±ì„ í™•ë³´í•˜ê³ , ìºì‹œ ê´€ë ¨ ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

<div style="text-align: center">â‚</div>

  

[^4_1]: https://stackoverflow.com/questions/48972459/videos-not-playing-due-to-no-access-control-allow-origin

  

[^4_2]: https://community.cloudflare.com/t/how-is-it-possible-for-the-video-to-load-without-setting-up-cors/642351

  

[^4_3]: https://devforum.zoom.us/t/getting-access-control-allow-origin-on-windows/79843

  

[^4_4]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS/Errors/CORSMissingAllowOrigin

  

[^4_5]: https://www.descope.com/blog/post/cors-errors

  

[^4_6]: https://github.com/TeamPiped/Piped/issues/3211

  

[^4_7]: https://www.advalify.io/vast-video-ads-and-the-cors-header-access-control-allow-origin-36067

  

[^4_8]: https://forum.ionicframework.com/t/bypassing-cors-on-android-for-video-elements/241487

  

[^4_9]: https://forum.playcanvas.com/t/solved-no-access-control-allow-origin-header-is-present-on-the-requested-resource/10844

  

[^4_10]: https://www.youtube.com/watch?v=tPKyDM0qEB8

  

[^4_11]: https://general.support.brightcove.com/developer/concepts-cors.html

  

[^4_12]: https://discuss.dev.twitch.com/t/cors-headers-on-video/919

  

[^4_13]: https://observablehq.com/@severo/trying-to-understand-cors-for-videos

  

[^4_14]: https://issuetracker.google.com/issues/229013699

  

[^4_15]: https://community.openfl.org/t/html5-video-load-cors-issue/13943

  

[^4_16]: https://answers.netlify.com/t/cors-headers-for-video-content/52419

  

[^4_17]: https://www.youtube.com/watch?v=FLUBO9GG4uU

  

[^4_18]: https://repost.aws/questions/QUzn5efm4tSjiJOO7b0so0gQ/getting-cors-error-even-when-the-cors-policy-is-set-to-allow-all-origins

  

[^4_19]: https://stackoverflow.com/questions/11375883/cross-origin-video-does-not-load-in-chrome

  

[^4_20]: https://github.com/CookPete/react-player/issues/1031